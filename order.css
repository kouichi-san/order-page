
:root{
  --bg:#fafafa;
  --ink:#1f2937;
  --muted:#6b7280;
  --brand:#10b981;
  --brand-ink:#064e3b;
  --border:#e5e7eb;
  --wrap:1080px;
  --btn-h:44px;
  --btn-radius:10px;
  --z-sticky:50;
}
*{box-sizing:border-box}
body{ margin:0; font-family:system-ui,-apple-system,"Segoe UI","Helvetica Neue",Arial,"Hiragino Sans","Noto Sans JP","Yu Gothic","Meiryo",sans-serif; color:var(--ink); background:#fff }
.wrap{ max-width:var(--wrap); width:100%; margin:0 auto; padding:0 16px }

/* ===== ヘッダー ===== */
header{ background:#fff; border-bottom:1px solid var(--border) }
.header-in{ display:flex; align-items:center; padding:12px 0 }
.brand{ font-size:20px; font-weight:800; text-indent:.4em; position:relative; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.brand::before{ content:""; position:absolute; left:0; top:50%; transform:translateY(-50%); width:4px; height:1.2em; border-radius:2px; background:var(--brand) }

/* ===== メニューバー ===== */
.menubar{ position:sticky; top:0; z-index:var(--z-sticky); background:#fff; border-bottom:1px solid var(--border) }
.menubar-in{ display:flex; gap:8px; align-items:center; padding:10px 0 }
.menu-pill{
  font-size:13px; font-weight:700; color:#0f172a; background:#f1f5f9;
  border:1px solid #e2e8f0; border-radius:var(--btn-radius); padding:8px 12px; white-space:nowrap; cursor:pointer;
}
.menu-right{ margin-left:auto }

/* ▼ カテゴリボタンの動的ラベル＆クリア（PC/タブのみ表示） */
#btnCategories.has-filter{ padding-right:28px; position:relative; }
#btnCategories .tag{ font-weight:800; color:#0f172a }
#btnCategories .sep::before{ content:"›"; margin:0 4px; color:#94a3b8 }
#btnCategories .x{
  position:absolute; right:8px; top:50%; transform:translateY(-50%);
  width:20px; height:20px; border-radius:6px; border:1px solid #e5e7eb;
  display:grid; place-items:center; font-size:12px; cursor:pointer; background:#fff;
}
#btnCategories .x:active{ transform:translateY(-50%) translateY(1px) }
/* SP（〜420px）は常に固定文言・余白も通常化 */
@media (max-width:420px){
  #btnCategories{ padding-right:12px }
}

/* ===== 並べ替えオプションバー ===== */
.sortbar{ display:none; background:#fff; border-bottom:1px solid #eef2f7 }
.sortbar[aria-hidden="false"]{ display:block }
.sortbar-in{ max-width:var(--wrap); margin:0 auto; padding:8px 16px; display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.sortbar .lbl{ font-size:12px; color:#64748b; margin-right:4px }
.sortbtn{
  font-size:12px; font-weight:800; color:#0f172a; background:#f8fafc;
  border:1px solid #e5e7eb; border-radius:999px; padding:6px 10px; cursor:pointer;
}
.sortbtn.active{ background:#e6f7f1; border-color:#bbf7d0; color:#065f46 }

/* ===== 商品カード ===== */
#productGrid.ppp-grid{ display:grid; grid-template-columns:repeat(2,540px); justify-content:space-between; gap:0 }
.ppp-card{ width:540px; background:#fff; border:1px solid var(--border); border-radius:16px; overflow:hidden }
.ppp-crumbrow{ display:block; padding:10px 12px 0 }
.ppp-crumb{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; color:#475569; font-size:12px }
.ppp-crumb a{ color:#0ea5e9; text-decoration:underline; text-underline-offset:2px; cursor:pointer }
.ppp-crumb a:hover{ color:#0284c7 } .ppp-crumb a:active{ opacity:.6 }
.ppp-titlebar{ display:flex; gap:8px; align-items:flex-start; padding:4px 12px 8px }
.ppp-name{ flex:1; font-weight:800; line-height:1.3; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden }
.ppp-fav{ width:32px; height:32px; border-radius:8px; background:#fff; border:1px solid var(--border); display:grid; place-items:center; cursor:pointer }
.ppp-mi{ display:grid; grid-template-columns:minmax(160px,6fr) minmax(140px,4fr); column-gap:12px; align-items:start; padding:0 12px }
.ppp-mi > .ppp-media, .ppp-mi > .ppp-info { min-width:0 }
.ppp-img{ aspect-ratio:4/3; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#fff }
.ppp-img>img{ width:100%; height:100%; object-fit:contain; display:block }
.ppp-prenote{ background:#f8fafc; border:1px solid #e2e8f0; border-radius:8px; padding:6px 8px; font-size:13px; color:#334155; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.ppp-price{ font-weight:900; font-size:22px }
.ppp-unit{ font-size:12px; color:#6b7280; text-align:right }
.ppp-actions{ display:grid; grid-template-columns:7fr 3fr; gap:8px; margin-bottom:10px }
.ppp-btn{ appearance:none; border:1px solid var(--border); background:#fff; border-radius:12px; cursor:pointer; font-weight:800; display:inline-flex; align-items:center; justify-content:center; height:var(--btn-h); white-space:nowrap; min-width:0; padding:0 12px; font-size:clamp(13px,1.6vw,16px) }
.ppp-btn.add{ background:var(--brand); color:#fff; border-color:transparent }
.ppp-btn.add:active{ transform:translateY(1px) }
.ppp-vars{ display:flex; flex-direction:column; gap:4px; margin-top:2px }
.ppp-pill{ width:100%; padding:6px 8px; border:1px solid var(--border); background:#fff; border-radius:10px; cursor:pointer; font-weight:700; font-size:13px }
.ppp-descwrap{ display:grid; grid-template-columns:1fr auto; gap:8px; align-items:end; padding:0 12px 12px }
.ppp-desc{ font-size:13px; color:#6b7280; line-height:1.5; min-height:calc(1.5 * 3 * 1em); display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden }
.ppp-more{ display:inline-flex; align-items:center; justify-content:center; text-decoration:none; color:#0ea5e9 }
.more--chev{ width:28px; height:28px; border-radius:8px; border:1px solid #e5e7eb; background:#fff }
.more--chev::before{ content:"›"; font-size:18px; line-height:1 } .more--chev:active{ transform: translateY(1px) }
@media(max-width:720px){ #productGrid.ppp-grid{ grid-template-columns:1fr; gap:12px } .ppp-card{ width:auto } }

/* ===== フッター（PC横一列／SP2行×3列） ===== */
.cart{ position:sticky; bottom:0; left:0; right:0; background:#fff; border-top:1px solid var(--border) }
.cart .wrap{ padding:0 16px }
.cart-box{ display:flex; align-items:center; gap:16px; justify-content:flex-end; padding:10px 0; padding-bottom:calc(10px + env(safe-area-inset-bottom)) }
.cart-left{ margin-right:auto; display:flex; align-items:center; gap:12px }
.inline-pill{ font-size:14px; background:#f0fdf4; color:var(--brand-ink); border:1px solid #d1fae5; border-radius:999px; padding:6px 14px; white-space:nowrap }
.count{ min-width:60px; text-align:right; font-size:14px }
.total{ min-width:80px; text-align:right; font-weight:900; font-size:18px }
.btn-cart{ background:var(--brand); color:#fff; border:none; border-radius:var(--btn-radius); padding:10px 18px; cursor:pointer; font-weight:800; white-space:nowrap }
.btn-cart:active{ transform:translateY(1px) }
@media(max-width:420px){
  .cart-box{ display:grid; grid-template-columns: 1fr 1fr auto; grid-template-rows: auto auto; gap:4px 12px; align-items:center; padding:6px 0; padding-bottom:calc(6px + env(safe-area-inset-bottom)) }
  .inline-pill{ display:none }
  .lbl-min{ grid-column:1; grid-row:1; font-size:12px; color:#065f46; opacity:.95 }
  .count{ grid-column:2; grid-row:1; text-align:right; font-weight:700 }
  .count::before{ content:"商品点数 "; font-size:12px; font-weight:600; opacity:.9; margin-right:4px }
  .val-date{ grid-column:1; grid-row:2; font-weight:700; font-size:14px; white-space:nowrap }
  .total{ grid-column:2; grid-row:2; text-align:right; font-size:17px }
  .total::before{ content:"合計金額 "; font-size:12px; font-weight:600; opacity:.9; margin-right:4px }
  .btn-cart{ grid-column:3; grid-row:1 / 3; align-self:stretch; padding:10px 14px; min-width:72px }
  .cart::after{ content:""; display:block; height:env(safe-area-inset-bottom); background:#fff }
}
@media(min-width:421px){ .val-date{ display:none } }

/* ===== ドロワー共通 ===== */
.ppp-drawer{position:fixed;inset:0;z-index:4000;display:none}
.ppp-drawer[aria-hidden="false"]{display:block}
.ppp-drawer__scrim{position:absolute;inset:0;background:rgba(0,0,0,.18);opacity:0;transition:opacity .18s ease;z-index:0}
.ppp-drawer[aria-hidden="false"] .ppp-drawer__scrim{opacity:1}
.ppp-drawer__panel{position:absolute;top:0;right:0;height:100%;width:100%;max-width:420px;background:#fff;box-shadow:-10px 0 24px rgba(0,0,0,.16);transform:translateX(100%);transition:transform .24s ease;display:grid;grid-template-rows:auto auto 1fr auto;overflow:hidden;padding-bottom:env(safe-area-inset-bottom);z-index:1}
@media(min-width:768px){ .ppp-drawer__panel{ max-width:560px } }
@media(min-width:1024px){ .ppp-drawer__panel{ max-width:640px } }
@media(min-width:1280px){ .ppp-drawer__panel{ max-width:840px } }
.ppp-drawer[aria-hidden="false"] .ppp-drawer__panel{transform:translateX(0)}
.ppp-drawer__bar{ display:flex; align-items:center; gap:8px; padding:12px 14px; border-bottom:1px solid var(--border) }
.ppp-drawer__title{ font-weight:800; font-size:16px; flex:1 }
.ppp-due{ margin-left:6px; font-size:11px; color:#475569; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:999px; padding:2px 6px; white-space:nowrap }
.ppp-iconbtn{ appearance:none; border:1px solid var(--border); background:#fff; border-radius:10px; padding:8px 10px; cursor:pointer }
.ppp-iconbtn:active{ transform:translateY(1px) }
.ppp-chips{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; padding:8px 14px; border-bottom:1px dashed #eef2f7 }
.ppp-listwrap{ overflow:auto; -webkit-overflow-scrolling:touch }
.ppp-listpad{ padding:10px 12px 16px }
.ppp-drawer__footer{ display:flex; gap:10px; padding:10px 14px; border-top:1px solid var(--border); background:#fafafa }
.ppp-btn{ flex:1; appearance:none; border:1px solid var(--border); background:#fff; border-radius:12px; padding:12px 14px; font-weight:800; cursor:pointer }
.ppp-btn.primary{ background:var(--brand); color:#fff; border-color:transparent }
.ppp-btn.primary.is-disabled{ opacity:.5; cursor:not-allowed }
.ppp-btn.neutral{ background:#f3f4f6; border-color:#e5e7eb; color:#111827 }
.ppp-btn.neutral:hover{ background:#e5e7eb }

/* ===== カートドロワー（中身） ===== */
.cartlist{ display:flex; flex-direction:column; gap:10px }
.cartrow{ border:1px solid var(--border); border-radius:8px; padding:10px }
.rowline{ display:grid; grid-template-columns:7fr 3fr; gap:8px; align-items:baseline }
.rowline .ttl{ font-weight:800; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
.rowline .prc{ font-weight:700; text-align:right }
.g2{ display:grid; grid-template-columns:112px 1fr; gap:8px; align-items:center }
.thumb{ width:112px; height:80px; border-radius:8px; border:1px solid var(--border); background:#f3f4f6; overflow:hidden }
.thumb img{ width:100%; height:100%; object-fit:cover }
.qtybar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.qtybar .group{ display:inline-flex; gap:8px; align-items:center; }
.qtybar .btn{ border:1px solid var(--border); background:#fff; border-radius:8px; height:40px; min-width:40px; font-weight:800; cursor:pointer }
.cartqty{ width:72px; height:40px; border:1px solid var(--border); border-radius:8px; text-align:center; font-weight:700 }
.totalline{ margin-top:6px; text-align:right; font-weight:800 }
.cart-empty{ color:#9ca3af; font-size:13px; padding:16px; text-align:center }

/* PC/SP 切り分け（ドロワ内） */
@media (max-width:420px){
  .rowline{ grid-template-columns:1fr 1fr }   /* SP: 1行目は均等 */
  .g2{ grid-template-columns:1fr }            /* SP: 画像の下に数量操作を折り返す */
  .thumb{ width:100%; height:auto; aspect-ratio:4/3; }
  .qtybar{ justify-content:flex-start }
}
@media (min-width:421px){
  .rowline{ grid-template-columns:7fr 3fr }   /* PC: 7:3 */
  .g2{ grid-template-columns:112px 1fr }      /* PC: 画像 | 操作 */
  .qtybar{ justify-content:flex-end }
}

/* ===== カートフォーム ===== */
.cartform{ border-top:1px dashed #eef2f7; margin-top:8px; padding-top:12px; display:flex; flex-direction:column; gap:10px }
.cartgrid{ display:grid; grid-template-columns:1fr 1fr; gap:8px }
@media (max-width:420px){ .cartgrid{ grid-template-columns:1fr } }
.cartlbl{ font-size:13px; font-weight:700; margin-bottom:4px }
.cartsel{ width:100%; height:40px; border:1px solid var(--border); border-radius:10px; padding:8px 10px; font-size:14px; background:#fff }
.carthelp{ font-size:12px; color:#6b7280 }
.cartmemo{ width:100%; min-height:88px; border:1px solid var(--border); border-radius:10px; padding:10px; font-size:14px }
.agrees{ padding-left:12px; border-left:4px solid #f3f4f6; display:flex; flex-direction:column; gap:8px }
.agrees label{ display:flex; align-items:center; gap:8px; font-size:13px }

html.ppp-no-scroll, body.ppp-no-scroll{ overflow:hidden!important; touch-action:none!important }
/* === SOLD OUT overlay (added) === */
.ppp-card.is-soldout .ppp-img{ position:relative; }
.ppp-card.is-soldout .ppp-img::after{
  content:"SOLD OUT";
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-weight:900; letter-spacing:.08em;
  background:rgba(0,0,0,.35); color:#fff;
}
.ppp-card.is-soldout .ppp-media img{ filter:grayscale(100%); opacity:.7 }

.ppp-descwrap{ cursor:pointer }

/* === PPP Card SP (<=720px) Overrides — Savepoint 2025-10-16 ================= */
@media (max-width: 720px){
  :root{ --btn-h:36px; }
  /* list: 1 column is assumed externally */
  .ppp-crumb{ font-size:12px; }
  .ppp-titlebar{ padding:2px 10px 0; }
  .ppp-name{ font-size:17px; line-height:1.2; }
  .ppp-fav{ width:26px; height:26px; }

  /* Image|Info ratio 4:6 for readability */
  .ppp-mi{ grid-template-columns:4fr 6fr; column-gap:8px; padding:0 10px; }

  .ppp-prenote{ margin-bottom:2px; }
  .ppp-price{ font-size:18px; text-indent:.5em; }
  .ppp-unit{ font-size:11px; margin:0 0 4px; }

  .ppp-btn{ font-size:13px; height:var(--btn-h); }
  .ppp-pill{ font-size:12px; padding:2px 6px; }

  .ppp-desc{ font-size:13px; line-height:1.4; min-height:calc(1.4 * 3 * 1em); }
  .ppp-more, .morebtn{ height:26px; font-size:12px; color:#6b7280; border-color:#d1d5db; }
}
