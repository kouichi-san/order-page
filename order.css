/* =====================================================================
   order.css  (Stage A：SPタイトルぶち抜き＋PC/SP別フッター)
   ===================================================================== */

:root{
  --bg:#fafafa;
  --ink:#1f2937;
  --muted:#6b7280;
  --brand:#10b981;
  --brand-ink:#064e3b;
  --border:#e5e7eb;
  --wrap:1080px;
  --btn-h:44px;
}

html,body{ height:100% }
body{ margin:0; color:var(--ink); background:var(--bg); font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif; }

/* --- ラッパー --- */
.wrap{ max-width:var(--wrap); margin:0 auto; padding:0 16px }
.header-in{ display:flex; align-items:center; height:56px }
.brand{ font-weight:900 }

/* --- カート下部バー（既存想定のベース） --- */
.cart{ position:sticky; bottom:0; left:0; right:0; background:#fff; border-top:1px solid var(--border) }
.cart .wrap{ padding:0 16px }
.cart-box{
  display:flex; align-items:center; gap:16px;
  justify-content:flex-end;
  padding:10px 0; padding-bottom:calc(10px + env(safe-area-inset-bottom));
}
.cart-left{ margin-right:auto; display:flex; align-items:center; gap:8px }
.inline-pill{ display:inline-block; padding:4px 8px; background:#f1f5f9; border-radius:999px; font-size:12px }
.lbl-min{ display:none } .val-date{ display:none } .count{ display:none } .total{ display:none }
.btn-cart{ background:var(--brand); color:#fff; border:0; border-radius:10px; height:40px; padding:0 16px; font-weight:800; }

/* --- Drawer 基本 --- */
.ppp-drawer{ position:fixed; inset:0; display:none }
.ppp-drawer[aria-hidden="false"]{ display:block }
.ppp-drawer__scrim{ position:absolute; inset:0; background:rgba(0,0,0,.3) }
.ppp-drawer__panel{
  position:absolute; right:0; top:0; bottom:0; width:min(720px, 100%);
  background:#fff; display:flex; flex-direction:column;
  border-left:1px solid var(--border);
}
.ppp-drawer__bar{ display:flex; align-items:center; gap:10px; padding:10px 16px; border-bottom:1px solid var(--border) }
.ppp-drawer__title{ font-weight:900 }
.ppp-due{ margin-left:auto; color:#64748b; font-size:12px }
.ppp-iconbtn{ border:0; background:transparent; font-size:16px; cursor:pointer }
.ppp-chips{ display:flex; gap:8px; padding:8px 16px }
.ppp-chip{ background:#f8fafc; border:1px solid #e2e8f0; border-radius:999px; padding:4px 10px; font-size:12px }

.ppp-listwrap{ flex:1; overflow:auto }
.ppp-listpad{ padding:16px }

.ppp-drawer__footer{ position:sticky; bottom:0; background:#fff; padding:10px 16px; border-top:1px solid var(--border) }
/* 右寄せFIX：フッター内だけ .ppp-btn の flex:1 を無効化 */
.ppp-drawer__footer .ppp-btn{ flex:0 0 auto }

/* --- 汎用ボタン --- */
.ppp-btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:0 14px; height:var(--btn-h); border-radius:10px; border:1px solid var(--border); font-weight:800; background:#fff; cursor:pointer }
.ppp-btn.primary{ background:var(--brand); border-color:var(--brand); color:#fff }
.ppp-btn.neutral{ background:#fff; color:#111827 }
.ppp-btn.is-disabled,
.ppp-btn[disabled],
.ppp-btn[aria-disabled="true"]{ opacity:.5; cursor:not-allowed }

/* ===== カート中身・フォーム（PCの基本並び） ===== */
.cartlist{ display:flex; flex-direction:column; gap:10px }
.cartrow{ border:1px solid var(--border); border-radius:8px; padding:10px; background:#fff }
.rowline{ display:grid; grid-template-columns:7fr 3fr; gap:8px; align-items:baseline }
.rowline .ttl{ font-weight:800; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
.rowline .prc{ font-weight:700; text-align:right }
.g2{ display:grid; grid-template-columns:112px 1fr; gap:8px; align-items:center }
.thumb{ width:112px; height:80px; border-radius:8px; border:1px solid var(--border); background:#f3f4f6; overflow:hidden }
.thumb img{ width:100%; height:100%; object-fit:cover }
.qtybar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:flex-end }
.qtybar .group{ display:inline-flex; gap:8px; align-items:center }
.qtybar .btn{ border:1px solid var(--border); background:#fff; border-radius:8px; height:40px; min-width:40px; font-weight:800; cursor:pointer }
.cartqty{ width:72px; height:40px; border:1px solid var(--border); border-radius:8px; text-align:center; font-weight:700 }
.totalline{ margin-top:6px; text-align:right; font-weight:800 }

/* ===== SP（〜420px）：タイトル行ぶち抜き／画像2〜4段／合計は非表示 ===== */
@media (max-width:420px){
  .cartrow{
    display:grid;
    grid-template-columns:25% 1fr;        /* 左：画像 1/4 */
    grid-template-rows:auto auto auto auto;  /* 1=タイトル, 2=小計/画像1, 3=数量/画像2, 4=削除/画像3 */
    column-gap:8px; align-items:start;
  }

  /* 中間の“箱”を溶かし、子を親グリッドに直配置 */
  .rowline{ display:contents }  /* .ttl, .prc を直配置 */
  .g2{ display:contents }       /* .thumb, .qtybar を直配置 */

  /* タイトル（行1 全幅ぶち抜き） */
  .rowline .ttl{ grid-column:1 / span 2; grid-row:1; text-align:left; font-weight:800; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }

  /* 小計（右列 行2） */
  .rowline .prc{ grid-column:2; grid-row:2; text-align:right; font-weight:700 }

  /* 画像（左列 行2〜4ぶち抜き） */
  .g2 .thumb{ grid-column:1; grid-row:2 / span 3; width:100%; aspect-ratio:4/3; height:auto; border-radius:8px; border:1px solid var(--border); overflow:hidden; background:#f3f4f6 }
  .g2 .thumb img{ width:100%; height:100%; object-fit:cover }

  /* 数量（右列 行3 右寄せ） */
  .g2 .qtybar{ grid-column:2; grid-row:3; display:flex; justify-content:flex-end; align-items:center; flex-wrap:wrap; gap:8px }

  /* 削除（右列 行4 右寄せ） */
  .g2 .qtybar .btn[data-cart="rm"]{ grid-column:2; grid-row:4; justify-self:end }

  /* 合計（行5）は使用しない */
  .totalline{ display:none !important }

  /* フォーム2カラム→1カラム */
  .cartgrid{ display:grid; grid-template-columns:1fr; gap:10px }
}

/* PCでの保険 */
@media (min-width:421px){
  .rowline{ display:grid; grid-template-columns:7fr 3fr; align-items:baseline }
  .g2{ display:grid; grid-template-columns:112px 1fr; gap:8px; align-items:center }
}

/* === ドロワーフッター：PC/SP別 2行構成（ボタン右寄せ） === */
.cart-footer{ width:100%; display:flex; flex-direction:column; gap:6px }
.cart-footer .footrow{ display:flex; align-items:center; gap:10px }
.cart-footer .cart-sum{ margin-right:auto; display:flex; gap:8px; align-items:baseline }
.cart-footer .cart-sum .lbl{ font-size:13px; color:#475569; font-weight:700 }
.cart-footer .cart-sum .val{ font-size:18px; font-weight:900 }
.cart-footer .actions{ display:flex; gap:10px; margin-left:auto }
@media (max-width:420px){
  .cart-footer--pc{ display:none }
  .cart-footer--sp{ display:flex }
}
@media (min-width:421px){
  .cart-footer--sp{ display:none }
  .cart-footer--pc{ display:flex }
}

/* 上部チップの「点数/合計」をCSSでも隠す（保険） */
#cartCountDrawer, #cartTotalDrawer { display:none !important }
