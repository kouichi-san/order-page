<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Ping-Pong-Pang｜翌日以降受け取り 注文</title>
<link rel="stylesheet" href="/order-dev/order.css?v=cb">
</head>
<body>

<header class="header">
  <div class="wrap headerbar">
    <div class="logo"><span>Ping-Pong-Pang</span></div>
    <nav class="menu-right">
      <button id="btnCategories" class="btn ghost">
        <span class="label">カテゴリ</span>
        <span class="tag" style="display:none"></span>
        <span class="sep" style="display:none"></span>
        <span class="tag2" style="display:none"></span>
        <span class="x" title="クリア" style="display:none">×</span>
      </button>
      <button id="btnSort" class="btn ghost">並べ替え</button>
      <button id="menuRightAction" class="btn primary">カートを見る</button>
    </nav>
  </div>
</header>

<main class="wrap">
  <section class="section">
    <h1 style="margin:.2em 0 0">翌日以降受取予約注文</h1>
    <p style="color:#6b7280; font-size:14px; margin:.3em 0 0">
      最短受取 <span id="cartMinDateInline">--/--/--</span>
    </p>

    <!-- 並べ替えバー -->
    <div id="sortbar" class="sortbar" hidden>
      <div class="inner">
        <button class="sortbtn is-active" data-sort="default">おすすめ</button>
        <button class="sortbtn" data-sort="popular">人気順</button>
        <button class="sortbtn" data-sort="new">新着</button>
        <button class="sortbtn" data-sort="price-asc">価格の安い順</button>
        <button class="sortbtn" data-sort="price-desc">価格の高い順</button>
      </div>
    </div>

    <!-- カテゴリドロワ -->
    <aside id="catDrawer" class="drawer" aria-hidden="true">
      <div class="drawer__scrim" data-close="catDrawer"></div>
      <div class="drawer__panel">
        <header class="drawer__head">
          <h2>カテゴリ</h2>
          <button class="iconbtn" data-close="catDrawer" aria-label="閉じる">×</button>
        </header>
        <div id="catList" class="catlist"></div>
      </div>
    </aside>

    <!-- 商品グリッド -->
    <div id="productGrid" class="ppp-grid"></div>

    <!-- 末尾ロード中インジケータ -->
    <div id="loadingMore" class="loading muted" hidden>読み込み中…</div>
  </section>
</main>

<!-- フッター固定カートバー（SP優先UI） -->
<footer class="cart">
  <div class="wrap">
    <div class="cart-box">
      <div class="cart-left">
        <div class="col">
          <div class="min" id="cartMinDate">--/--/--</div>
          <div class="note">最短受取日</div>
        </div>
        <div class="col">
          <div class="count"><span id="cartCount">0</span>点</div>
          <div class="note">商品点数</div>
        </div>
        <div class="col">
          <div class="total" id="cartTotal">¥0</div>
          <div class="note">合計金額</div>
        </div>
      </div>
      <button id="cartOpen" class="btn primary">カート</button>
    </div>
  </div>
</footer>

<!-- カートドロワ -->
<div id="cartDrawer" class="ppp-drawer" aria-hidden="true">
  <div class="ppp-drawer__scrim" data-close="cartDrawer"></div>
  <section class="ppp-drawer__panel" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
    <header class="ppp-drawer__head">
      <h2 id="cartTitle">ご注文内容</h2>
      <div class="ppp-chips">
        <span class="ppp-chip" id="chipMin">最短受取 <span id="chipMinDate">--/--/--</span></span>
        <span class="ppp-chip">点数 <span id="chipCount">0</span></span>
        <span class="ppp-chip">合計 <span id="chipTotal">¥0</span></span>
      </div>
      <button class="iconbtn" data-close="cartDrawer" aria-label="閉じる">×</button>
    </header>

    <div class="ppp-drawer__body">
      <!-- 受取日時 -->
      <section class="ppp-section">
        <h3 class="ppp-section__title">受取日時</h3>
        <div class="ppp-dategrid">
          <div id="dateList" class="ppp-datepill"></div>
          <div class="ppp-time">
            <label><input type="radio" name="slot" value="14時〜17時" checked />14時〜17時</label>
            <label><input type="radio" name="slot" value="17時〜20時" />17時〜20時</label>
          </div>
          <p class="muted" style="margin:.25rem 0 0">※ 2:00 を過ぎると最短受取日が翌日にスライドします</p>
        </div>
      </section>

      <!-- メモ -->
      <section class="ppp-section">
        <h3 class="ppp-section__title">お店へのメモ</h3>
        <textarea id="orderMemo" rows="2" placeholder="袋の数、簡単な依頼など（任意）"></textarea>
      </section>

      <!-- カート明細 -->
      <section class="ppp-section">
        <h3 class="ppp-section__title">商品</h3>
        <div id="cartList"></div>
        <div id="cartEmpty" class="muted" hidden>カートは空です</div>
      </section>

      <!-- 同意事項 -->
      <section class="ppp-section">
        <label class="agree">
          <input id="agreeStock" type="checkbox" />
          <span>商品の確保について（必須）</span>
        </label>
        <p class="muted small">売切時は同等商品のご案内・数量変更などのご相談をさせていただく場合があります。</p>
      </section>
    </div>

    <div class="ppp-drawer__foot">
      <div class="foot-left">
        <div class="min" id="cartMinNote">最短受取日</div>
        <div class="total" id="cartTotalFooter">¥0</div>
      </div>
      <div class="foot-right">
        <button id="cartDrawerCancel" class="ppp-btn neutral" style="height:var(--btn-h)">戻る</button>
        <button id="cartProceed" class="ppp-btn primary is-disabled" style="height:var(--btn-h)" disabled aria-disabled="true">注文へ進む</button>
      </div>
    </div>
  </section>
</div>

<script src="/order-dev/app.js?v=cb" defer></script>
</body>
</html>
